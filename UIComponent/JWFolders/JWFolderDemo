- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    if (!cell)
        return;
    
    CGPoint openPoint = CGPointMake(.0f, cell.frame.origin.y+cell.frame.size.height-tableView.contentOffset.y); //arbitrary point
//    NSLog(@"open point: %f, %f", openPoint.x, openPoint.y);

    UIView *noiseView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 200)];
    noiseView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"noise"]];
    
    CGRect frame = noiseView.frame;
    if (openPoint.y < tableView.bounds.size.height-200)
        frame.origin.y = openPoint.y;
    else
        frame.origin.y = tableView.bounds.size.height-200;
    
    if (openPoint.y > tableView.bounds.size.height) {
        [tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionBottom animated:NO];
        openPoint = CGPointMake(.0f, tableView.bounds.size.height); //arbitrary point
    }
    
    noiseView.frame = frame;
    [JWFolders openFolderWithContentView:noiseView
                                position:openPoint 
                           containerView:self.view 
                                  sender:self 
                               openBlock:^(UIView *contentView, CFTimeInterval duration, CAMediaTimingFunction *timingFunction) {
                                   //perform custom animation here on contentView if you wish
//                                   NSLog(@"Folder view: %@ is opening with duration: %f", contentView, duration);
                               }
                              closeBlock:^(UIView *contentView, CFTimeInterval duration, CAMediaTimingFunction *timingFunction) {
                                  //also perform custom animation here on contentView if you wish
//                                  NSLog(@"Folder view: %@ is closing with duration: %f", contentView, duration);
                              }
                         completionBlock:^ {
                             //the folder is closed and gone, lets do something cool!
//                             NSLog(@"Folder view is closed.");
                         }
     ];

    return;
    
}